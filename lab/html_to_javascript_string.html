<!DOCTYPE html>
<html >
    <head>
        <meta charset="utf-8" />
        <title>html代码变js字符串</title>
		<style type="text/css">
			br{clear:both;}
			.btn{padding:2px 15px;cursor:pointer;}
			.taA,.taB{
				float:left;
				_display:inline;
			}
			.taA{}
			.taB{
				margin-left:10px;
			}
			
			#ninjia,#hero{
				overflow:hidden;
				float:left;
				width:400px;
				height:400px;
				border:1px solid;
				border-color:#999 #ccc #ccc #999;
				padding:4px;
				font:normal 12px/14px "Consolas";
			}
			#ninjia{}
			#hero{}
			
			.hot{
				border:1px solid blue !important;
			}
		</style>
    </head>
	<body>
		
		<div class="taA">
			<textarea id="ninjia"></textarea>
		</div>
		
		<div class="taB">
			<textarea id="hero" autocomplete="off"></textarea>
		</div>
		<br /><br />
		<input class="btn" type="button" value="ok" onclick="gogogo();" />
		
		
		<script type="text/javascript">
		
			var ninjia=document.getElementById('ninjia'),
				hero=document.getElementById('hero'),
				time=null;
			
			function trim(s){
				return s.replace(/^\s+|\s+$/,'');
			};
			
			function add_dot(s){
				return s.replace(/\'/g,'\\\'').replace(/(\S)/,'\'$1');
			};
			
			function gogogo(){
				var ninjia_value=trim(ninjia.value);
				if(ninjia_value=='') return;
				
				clearTimeout(time);
				
				var hero_value;
				var ninjia_array=[];
				
				ninjia_array=ninjia_value.split('\n');
				
				var hero_array=[];
				console.log(hero_array)
				
				for(var i=0,len=ninjia_array.length;i<len;i++){
					var ninjia_array_temp=ninjia_array[i];
					
					if(trim(ninjia_array_temp)=='') continue;
					
					if(i!=len-1){
						hero_array.push(add_dot(ninjia_array_temp)+'\'\+');
					}else{
						hero_array.push(add_dot(ninjia_array_temp)+'\';');
					}
				}
				
				hero.value=hero_array.join('\n');
				
				hero.className='hot';
				time=setTimeout(function(){
					hero.className='';
				},5000);
			};
			
		</script>
		
	</body>
</html>