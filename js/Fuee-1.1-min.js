/*
 * @author		zhang binjue
 * @blog		http://hi.baidu.com/paperstudio
 * @copyright	No Rights Reserved
 * @version		1.1
 */
(function(){var undefined,D=document,Fuee=window.Fuee=function(name){if(typeof name=="string"&&name.charAt(0)=="#"){return new Fuee.fn(name.slice(1,name.length));}else{return new Fuee.fn(name);}};Fuee.fn=Fuee.prototype=function(name){if(typeof name=="string"){this.name=name;this.elem=D.getElementById(name);}else{this.elem=name;}if(!this.elem){throw Error('this.elem is not defined');}};Fuee.getVersion=function(){return"1.1";};Fuee.fn.prototype={css:function(prop){var elem=this.elem;if(typeof prop=="string"){if(elem.nodeType!=1){return;}if(elem.style[prop]){return elem.style[prop];}else if(elem.currentStyle){if(prop=="float")prop="styleFloat";return elem.currentStyle[prop];}else if(D.defaultView&&D.defaultView.getComputedStyle){if(prop=="float")prop="cssFloat";if(prop!="display"&&(elem.style.display=="none"||D.defaultView.getComputedStyle(elem,null)["display"]=="none")){Fuee(elem).bestDisplay();var t=D.defaultView.getComputedStyle(elem,null)[prop];elem.style.display="none";return t;}return D.defaultView.getComputedStyle(elem,null)[prop];}else{return null;}}else{Fuee(elem).each(function(){for(var i in prop){if(i=="opacity")this.style.filter="alpha(opacity="+prop[i]*100+")";this.style[i]=prop[i];}});return Fuee(elem);}},each:function(callback){return Fuee.each(this.elem,callback);},resetCSS:function(prop){var old={};for(var i in prop){old[i]=Fuee(this.elem).css(i);this.elem.style[i]=prop[i];}return old;},addClass:function(name){var elem=this.elem;Fuee(elem).each(function(){var _name=name,oldClass=this.className;if(oldClass==''){this.className=name;}else{oldClass=oldClass.split(" ");_name=_name.split(" ");var namePass='';for(var i=0;i<_name.length;i++){for(var j=0;j<oldClass.length;j++){if(oldClass[j]==_name[i]){break;}if(j==oldClass.length-1&&oldClass[j]!=_name[i]){namePass=namePass+" "+_name[i];}}}this.className=oldClass.join(" ")+namePass;}});return Fuee(elem);},removeClass:function(name){var elem=this.elem;if(name===undefined){Fuee(elem).each(function(){this.className="";});}else{Fuee(elem).each(function(){var _name=name,oldClass=this.className;if(oldClass!=''){oldClass=oldClass.split(" ");_name=_name.split(" ");for(var i=0;i<_name.length;i++){for(var j=0;j<oldClass.length;j++){if(oldClass[j]==_name[i]){oldClass.splice(j,1);break;}}}this.className=oldClass.join(" ");}});}return Fuee(elem);},setOpacity:function(level){Fuee(this.elem).each(function(){this.style.filter=this.filters?this.style.filter='alpha(opacity='+level+')':this.style.opacity=level/100;});},getPosition:function(){var elem=this.elem,ua=navigator.userAgent.toLowerCase(),isOpera=(ua.indexOf('opera')!=-1),isIE=(ua.indexOf('msie')!=-1&&!isOpera),elemNone=null;if(!elem.parentNode){return false;}if(Fuee(elem).css("display")=="none"){Fuee(elem).bestDisplay();elemNone=true;}var parent=null,pos=[],box;if(elem.getBoundingClientRect){box=elem.getBoundingClientRect();var scrollTop=Math.max(D.documentElement.scrollTop,D.body.scrollTop),scrollLeft=Math.max(D.documentElement.scrollLeft,D.body.scrollLeft);if(elemNone){elem.style.display="none";}return{left:box.left+scrollLeft,top:box.top+scrollTop};}else if(D.getBoxObjectFor){box=D.getBoxObjectFor(el);var borderLeft=(elem.style.borderLeftWidth)?parseInt(elem.style.borderLeftWidth):0;var borderTop=(elem.style.borderTopWidth)?parseInt(elem.style.borderTopWidth):0;pos=[box.x-borderLeft,box.y-borderTop];}else{pos=[elem.offsetLeft,elem.offsetTop];parent=elem.offsetParent;if(parent!=elem){while(parent){pos[0]+=parent.offsetLeft+parseInt(Fuee(parent).css("borderLeft"))||0;pos[1]+=parent.offsetTop+parseInt(Fuee(parent).css("borderTop"))||0;parent=parent.offsetParent;}}if(ua.indexOf('opera')!=-1||(ua.indexOf('safari')!=-1&&elem.style.position=='absolute')){pos[0]-=D.body.offsetLeft;pos[1]-=D.body.offsetTop;}}if(elem.parentNode){parent=elem.parentNode;}else{parent=null;}while(parent&&parent.tagName!='BODY'&&parent.tagName!='HTML'){pos[0]-=parent.scrollLeft;pos[1]-=parent.scrollTop;if(parent.parentNode){parent=parent.parentNode;}else{parent=null;}}if(elemNone){elem.style.display="none";}return{left:pos[0],top:pos[1]};},getElem:function(num){return num===undefined?this.elem:this.elem[num];},get:function(num){var elem=this.elem,num=num||0;if(elem.length){return Fuee(elem[num]);}else{throw Error('function get : elem is not array');}},find:function(selector,num){var elem=this.elem,result=[],parts=selector.split(" "),getTagName=function(parent,tagname){var r=[];Fuee(parent).each(function(){var c=Fuee(this).getElem().getElementsByTagName(tagname);if(c.length!=0)r=r.concat(Fuee.realArray(c));});return r;},part=parts.shift();if(part.indexOf(".")==-1){result=getTagName(elem,part);if(result.length==0)return false;return num===undefined?parts.length==0?Fuee(result):Fuee(result).find(parts.join(' ')):parts.length==0?Fuee(result[num]):Fuee(result).find(parts.join(' '),num);}else{var p=part.split("."),partTagName=p[0]==''?'*':p[0],partClassName=p[1],r=getTagName(elem,partTagName);Fuee(r).each(function(){if(this.className.indexOf(partClassName)>-1){result.push(this);}});if(result.length==0)return false;return num===undefined?parts.length==0?Fuee(result):Fuee(result).find(parts.join(' ')):parts.length==0?Fuee(result[num]):Fuee(result).find(parts.join(' '),num);}},bind:function(oFuee){var elem=this.elem,events="blur,focus,load,resize,scroll,unload,click,dblclick,"+"mousedown,mouseup,mousemove,mouseover,mouseout,mouseenter,mouseleave,"+"change,select,submit,keydown,keypress,keyup,error";if(arguments.length==2){var type=arguments[0],callback=arguments[1];if(events.indexOf(type)==-1){alert("绑定事件的名称存在错误!");return;}Fuee(elem).each(function(i){var _this=this,fn=function(e){return callback.call(_this,window.event||e);};if(_this.getI===undefined){_this.getI=i;}_this.addEventListener?_this.addEventListener(type,fn,false):_this.attachEvent?_this.attachEvent('on'+type,fn):_this['on'+type]=function(e){fn(e);};});}else{for(var i in oFuee){(function(k){var callback=oFuee[k],type=k;if(events.indexOf(type)==-1){alert("绑定事件的名称存在错误!");return;}Fuee(elem).each(function(i){var _this=this,fn=function(e){return callback.call(_this,window.event||e);};if(_this.getI===undefined){_this.getI=i;}_this.addEventListener?_this.addEventListener(type,fn,false):_this.attachEvent?_this.attachEvent('on'+type,fn):_this['on'+type]=function(e){fn(e);};});})(i);}}return Fuee(elem);},prev:function(num){var num=num||1,elem=this.elem;while(num!=0){do{elem=elem.previousSibling;}while(elem&&elem.nodeType!=1);num--;}return elem?Fuee(elem):null;},prevAll:function(){var nodes=[],elem=this.elem,firstNode=Fuee(elem.parentNode).first().getElem();while(elem!=firstNode){elem=elem.previousSibling;if(elem&&elem.nodeType==1){nodes.push(elem);}};return nodes.length==0?null:Fuee(nodes);},next:function(num){var num=num||1,elem=this.elem;while(num!=0){do{elem=elem.nextSibling;}while(elem&&elem.nodeType!=1);num--;}return elem?Fuee(elem):null;},nextAll:function(){var nodes=[],elem=this.elem,lastNode=Fuee(elem).parent().last().getElem();while(elem!=lastNode){elem=elem.nextSibling;if(elem&&elem.nodeType==1){nodes.push(elem);}};return nodes.length==0?null:Fuee(nodes);},first:function(){var elem=this.elem,elem=elem.firstChild;return elem==null?null:(elem&&elem.nodeType!=1)?Fuee(elem).next():Fuee(elem);},last:function(){var elem=this.elem,elem=elem.lastChild;return elem==null?null:(elem&&elem.nodeType!=1)?Fuee(elem).prev():Fuee(elem);},children:function(num){var children=[],childNodes=this.elem.childNodes;for(var i=0,l=childNodes.length;i<l;i++){if(childNodes[i].nodeType==1){children.push(childNodes[i]);}}return children.length==0?null:num===undefined?Fuee(children):Fuee(children[num-1]);},parent:function(num){var num=num||1,elem=this.elem;while(num--){elem=elem.parentNode;}return elem?Fuee(elem):null;},siblings:function(){var r1=this.prevAll(),r2=this.nextAll();if(r1!=null&&r2!=null)return Fuee(r1.getElem().concat(r2.getElem()));else if(r1==null&&r2!=null)return r2;else if(r1!=null&&r2==null)return r1;else return null;},remove:function(){var elem=this.elem;if(elem){Fuee(elem).each(function(){this.parentNode.removeChild(this);});}},empty:function(){var elem=this.elem;while(elem.firstChild){elem.removeChild(elem.firstChild);};return Fuee(elem);},html:function(content){var elem=this.elem;if(content===undefined){return Fuee.trim(elem.innerHTML.toString());}else{elem.innerHTML=content.toString();return Fuee(elem);}},text:function(oFuee){var r=[],elem=this.elem,tempText=this.forText(r,elem);if(oFuee===undefined){return tempText.join('')==''?null:tempText.join('');}else if(oFuee.getArray===true){return tempText.length==0?null:tempText;}},forText:function(r,node){var nodeChildren=node.childNodes,len=nodeChildren.length;for(var i=0;i<len;i++){if(nodeChildren[i].nodeType==1){this.forText(r,nodeChildren[i]);}if(nodeChildren[i].nodeType==3){var nodeChildrenValue=Fuee.trim(nodeChildren[i].nodeValue);if(nodeChildrenValue!=""){r.push(nodeChildrenValue);}}}return r;},attr:function(name,value){if(name===undefined||typeof name!="string")return'';var elem=this.elem,name={'for':'htmlFor','class':'className'}[name]||name;if(value!==undefined){if(!value.length){value=[value];}Fuee(elem).each(function(i){this[name]=value[i];if(this.setAttribute){value[i]==undefined?this.setAttribute(name,value[value.length-1]):this.setAttribute(name,value[i]);}});return Fuee(elem);}else{return elem[name]||elem.getAttribute(name)||'';}},stringToElem:function(content){var odiv=D.createElement("div"),frag=D.createDocumentFragment();odiv.innerHTML=content;while(odiv.firstChild){frag.appendChild(odiv.firstChild);}return frag;},append:function(content){var elem=this.elem;typeof content=="string"?elem.appendChild(this.stringToElem(content)):elem.appendChild(content);return Fuee(elem);},prepend:function(content){var elem=this.elem,fChild=elem.firstChild;typeof content=="string"?elem.insertBefore(this.stringToElem(content),fChild):elem.insertBefore(content,fChild);return Fuee(elem);},after:function(content){var elem=this.elem,parent=elem.parentNode;content=typeof content=="string"?this.stringToElem(content):content;parent.firstChild==elem?parent.appendChild(content):parent.insertBefore(content,elem.nextSibling);return Fuee(elem);},before:function(content){var elem=this.elem,parent=elem.parentNode;content=typeof content=="string"?this.stringToElem(content):content;parent.insertBefore(content,elem);return Fuee(elem);},bestDisplay:function(){var elem=this.elem,tagname=elem.tagName,node=D.createElement(tagname);D.body.appendChild(node);var tempDisplay=Fuee(node).css("display");Fuee(node).remove();if(elem.currentStyle){var outDisplay=elem.currentStyle["display"];}else{var outDisplay=D.defaultView.getComputedStyle(elem,null)["display"];}if(elem.style.display=="none"){elem.style.display="";if(outDisplay=="none"){elem.style.display=tempDisplay;}}else{if(outDisplay=="none"){elem.style.display=tempDisplay;}}return Fuee(elem);},hide:function(speed,callback){var elem=this.elem;if(speed===undefined){Fuee(elem).each(function(){this.$oldDisplay=Fuee(this).css("display");if(this.$oldDisplay!=='none'){this.style.display="none";}});}else{if(typeof speed==="string"){speed={"fast":2,"normal":5,"slow":10}[speed];}speed=speed<100?speed:5;Fuee(elem).each(function(){var self=this;if(Fuee(self).css("display")=='none')return;var h=Fuee(self).getElemContentHeightWidth().height,w=Fuee(self).getElemContentHeightWidth().width,oldCSSTest=self.style.cssText;self.style.overflow="hidden";for(var i=100;i>=0;i--){(function(pos){setTimeout(function(){Fuee(self).css({height:(pos/100)*h+"px",width:(pos/100)*w+"px"});Fuee(self).setOpacity(pos);if(pos==0){self.style.cssText=oldCSSTest;self.curDisplay=Fuee(self).css("display");if(self.curDisplay!='none')self.$oldDisplay=self.curDisplay;self.style.display="none";if(callback)callback.call(self);}},(-pos+101)*(speed+1));})(i);}});}return Fuee(elem);},show:function(speed,callback){var elem=this.elem;if(speed===undefined){Fuee(elem).each(function(){var self=this;if(self.$oldDisplay==undefined){Fuee(self).bestDisplay();}else{self.$oldDisplay=='none'?Fuee(self).bestDisplay():self.style.display=self.$oldDisplay;}});}else{if(typeof speed==="string"){speed={"fast":2,"normal":5,"slow":10}[speed];}speed=speed<100?speed:5;Fuee(elem).each(function(){var self=this;if(Fuee(self).css("display")=='block'||Fuee(self).css("display")=='inline')return;var oldCSSTest=self.style.cssText;h=Fuee(self).getElemContentHeightWidth().height,w=Fuee(self).getElemContentHeightWidth().width;Fuee(self).css({height:"0",overflow:"hidden",opacity:"0"});Fuee(self).show();for(var i=0;i<=100;i++){(function(pos){setTimeout(function(){Fuee(self).css({height:(pos/100)*h+"px",width:(pos/100)*w+"px"});Fuee(self).setOpacity(pos);if(pos==100){self.style.cssText=oldCSSTest;if(self.$oldDisplay==undefined){self.style.display=Fuee(self).bestDisplay();}else{self.$oldDisplay=='none'?self.style.display=Fuee(self).bestDisplay():self.style.display=self.$oldDisplay;}if(callback)callback.call(self);}},(pos+1)*(speed+1));})(i);}});}return Fuee(elem);},sDown:function(speed,callback){var elem=this.elem;if(speed===undefined){var speed=5;}else{if(typeof speed==="string"){speed={"fast":1,"normal":5,"slow":10}[speed];}var speed=speed<100?speed:3;}Fuee(elem).each(function(){if(Fuee(this).css("display")!="none")return;Fuee(this).show();var self=this,h=Fuee(self).getElemContentHeightWidth().height,paddingTop=parseInt(Fuee(self).css("paddingTop"))||0,paddingBottom=parseInt(Fuee(self).css("paddingBottom"))||0;borderTop=parseInt(Fuee(self).css("borderTopWidth"))||0,borderBottom=parseInt(Fuee(self).css("borderBottomWidth"))||0,oldCSSTest=self.style.cssText;if(!Fuee.isIE())Fuee(self).setOpacity(0);Fuee(self).css({height:'0',paddingTop:"0",paddingBottom:"0",borderTopWidth:"0",borderBottomWidth:"0",overflow:"hidden"});for(var i=0;i<=100;i++){(function(pos){setTimeout(function(){Fuee(self).css({height:(pos/100)*h+"px",paddingTop:(pos/100)*paddingTop+"px",paddingBottom:(pos/100)*paddingBottom+"px",borderTopWidth:(pos/100)*borderTop+"px",borderBottomWidth:(pos/100)*borderBottom+"px"});if(!Fuee.isIE())Fuee(self).setOpacity(pos);if(pos==100){self.style.cssText=oldCSSTest;Fuee(self).show();if(callback)callback.call(self);}},(pos+1)*(speed+1));})(i);}});return Fuee(elem);},sUp:function(speed,callback){var elem=this.elem;if(speed===undefined){var speed=5;}else{if(typeof speed==="string"){speed={"fast":2,"normal":5,"slow":10}[speed];}var speed=speed<100?speed:3;}Fuee(elem).each(function(){if(Fuee(this).css("display")=="none")return;var self=this,h=Fuee(self).getElemContentHeightWidth().height,paddingTop=parseInt(Fuee(self).css("paddingTop"))||0,paddingBottom=parseInt(Fuee(self).css("paddingBottom"))||0,borderTop=parseInt(Fuee(self).css("borderTopWidth"))||0,borderBottom=parseInt(Fuee(self).css("borderBottomWidth"))||0,oldCSSTest=self.style.cssText;self.style.overflow="hidden";for(var i=100;i>=0;i-=1){(function(pos){setTimeout(function(){Fuee(self).css({height:(pos/100)*h+"px",paddingTop:(pos/100)*paddingTop+"px",paddingBottom:(pos/100)*paddingBottom+"px",borderTopWidth:(pos/100)*borderTop+"px",borderBottomWidth:(pos/100)*borderBottom+"px"});if(!Fuee.isIE())Fuee(self).setOpacity(pos);if(pos==0){self.style.cssText=oldCSSTest;Fuee(self).hide();if(callback)callback.call(self);}},(-pos+101)*(speed+1));})(i);}});return Fuee(elem);},fIn:function(speed,callback){var elem=this.elem;if(typeof speed=="string"){speed={"fast":40,"normal":10,"slow":5}[speed];}var speed=speed===undefined?10:speed<100?speed:10;Fuee(elem).each(function(){var self=this;if(self.fOutTime||self.fInTime||Fuee(self).css("display")!="none")return;Fuee(self).show();var pos=0,endPos=Fuee(self).css("opacity")*100||100,oldCSSText=self.style.cssText;Fuee(self).setOpacity(pos);self.style.zoom=1;self.fInTime=setInterval(function(){pos=pos+speed/5;if(pos>=endPos){clearInterval(self.fInTime);self.fInTime=null;self.style.cssText=oldCSSText;if(callback)callback.call(self);}else{Fuee(self).setOpacity(pos);}},1);});return Fuee(elem);},fOut:function(speed,callback){var elem=this.elem;if(typeof speed=="string"){speed={"fast":40,"normal":10,"slow":5}[speed];}var speed=speed===undefined?10:speed<100?speed:10;Fuee(elem).each(function(){var self=this;if(self.fOutTime||self.fInTime||Fuee(self).css("display")=="none")return;var pos=Fuee(self).css("opacity")*100||100,endPos=0,oldCSSText=self.style.cssText;Fuee(self).setOpacity(pos);self.style.zoom=1;self.fOutTime=setInterval(function(){pos=pos-speed/5;if(pos<=endPos){clearInterval(self.fOutTime);self.fOutTime=null;self.style.cssText=oldCSSText;Fuee(self).hide();if(callback)callback.call(self);}else{Fuee(self).setOpacity(pos);}},1);});return Fuee(elem);}};Fuee.each=function(r,callback){var tr=[];r.length===undefined?tr.push(r):tr=r;var i=0,length=tr.length;for(var value=tr[0];i<length&&callback.call(value,i)!==false;value=tr[++i]){}};Fuee.trim=function(s){if(typeof s=="string"){return s.replace(/^(\s|\u00A0)+|(\s|\u00A0)+$/g,"");}};Fuee.setCookie=function(name,value,days){var Days=days||30;var exp=new Date();exp.setTime(exp.getTime()+Days*24*60*60*1000);D.cookie=name+"="+escape(value)+";expires="+exp.toGMTString();};Fuee.getCookie=function(name){var arr=D.cookie.match(new RegExp("(^| )"+name+"=([^;]*)(;|$)"));if(arr!=null)return unescape(arr[2]);return null;};Fuee.delCookie=function(name){var exp=new Date();exp.setTime(exp.getTime()-1);var cval=Fuee.getCookie(name);if(cval!=null)D.cookie=name+"="+cval+";expires="+exp.toGMTString();};Fuee.isIE=function(v){var msg=navigator.userAgent;if(v===undefined){return msg.indexOf("MSIE")>-1?true:false;}if(+v==6){return msg.indexOf("MSIE 6.0")>-1&&msg.indexOf("MSIE 6.0")<50?true:false;}if(+v==7){return msg.indexOf("MSIE 7.0")>-1?true:false;}if(+v==8){return msg.indexOf("MSIE 8.0")>-1?true:false;}};Fuee.isOpera=function(){return navigator.userAgent.indexOf("Opera")>-1?true:false;};Fuee.isFirefox=function(){return navigator.userAgent.indexOf("Firefox")>-1?true:false;};Fuee.ieImage=function(){try{D.execCommand("BackgroundImageCache",false,true);}catch(e){}};Fuee.getMouse=function(e){e=e||window.event;if(e.pageX||e.pageY){return{x:e.pageX,y:e.pageY};}var dd=D.documentElement;return{x:e.clientX+dd.scrollLeft-dd.clientLeft,y:e.clientY+dd.scrollTop-dd.clientTop};};Fuee.getBody=function(){return{height:D.body.clientHeight,width:D.body.clientWidth}};Fuee.getArea=function(){return{height:D.documentElement.clientHeight,width:D.documentElement.clientWidth}};Fuee.getScroll=function(){return{top:Math.max(D.documentElement.scrollTop,D.body.scrollTop),left:Math.max(D.documentElement.scrollLeft,D.body.scrollLeft)}};Fuee.getMax=function(){var dd=D.documentElement;return{height:Math.max(dd.scrollHeight,dd.clientHeight),width:Math.max(dd.scrollWidth,dd.clientWidth)}};Fuee.lightbox=function(oFuee){Fuee.lightboxCheck=true;var ob=oFuee===undefined?{}:oFuee,opacity=ob.opacity||0.4,zIndex=ob.zIndex||1000,color=ob.color||"#000";if(Fuee.isIE(6)){var html='<div style=\" filter:alpha(opacity='+opacity*100+'); height:'+Fuee.getMax().height+'px;width:'+Fuee.getMax().width+'px;z-index:'+zIndex+';background:'+color+';opacity:'+opacity+';left:0;top:0;position:absolute;\"><\/div>'+'<iframe frameborder="no" marginwidth="0" marginheight="0" scrolling="no" style=\" opacity:0; filter:alpha(opacity=0);height:'+Fuee.getMax().height+'px;width:'+Fuee.getMax().width+'px;z-index:'+(zIndex-1)+';left:0;top:0;position:absolute;\"><\/iframe>';}else{var html='<div style=\" filter:alpha(opacity='+opacity*100+'); height:'+Fuee.getMax().height+'px;width:'+Fuee.getMax().width+'px;z-index:'+zIndex+';background:'+color+';opacity:'+opacity+';left:0;top:0;position:absolute;\"><\/div>';}var div=D.createElement("div");div.setAttribute("id","Fuee-lightbox");div.innerHTML=html;D.body.appendChild(div);window.onresize=function(){if(Fuee.lightboxCheck){Fuee("Fuee-lightbox").first().css({height:Fuee.getMax().height+"px",width:Fuee.getMax().width+"px"});}};};Fuee.removeLightbox=function(){Fuee.lightboxCheck=false;if(D.getElementById("Fuee-lightbox")){Fuee("Fuee-lightbox").remove();}};Fuee.stopBubble=function(e){if(e&&e.stopPropagation){e.stopPropagation();}else{window.event.cancelBubble=true;}};Fuee.stopDefault=function(e){if(e&&e.preventDefault){e.preventDefault();}else{window.event.returnValue=false;}return false;};Fuee.realArray=function(c){try{return Array.prototype.slice.call(c);}catch(e){var r=[],len=c.length;for(var i=0;i<len;i++){r[i]=c[i];}return r;}};Fuee.getEvent=function(){if(D.all){return window.event;}func=Fuee.getEvent.caller;while(func!=null){var arg0=func.arguments[0];if(arg0){if((arg0.constructor==Event||arg0.constructor==MouseEvent)||(typeof(arg0)=="object"&&arg0.preventDefault&&arg0.stopPropagation)){return arg0;}}func=func.caller;}return null;};Fuee.getEventElement=function(){var e=Fuee.getEvent();return e.srcElement?e.srcElement:e.target;};Fuee.extend=function(oFuee){for(var i in oFuee){for(var k in Fuee.fn.prototype){if(i==k){alert("扩展中的函数名已经存在，请修改!");return false;}}Fuee.fn.prototype[i]=oFuee[i];}};Fuee.extend({hold:function(oFuee){var elem=this.elem;Fuee(elem).each(function(){var node=this;oFuee.timeOn=oFuee.timeOn===undefined?1:oFuee.timeOn;oFuee.timeOut=oFuee.timeOut===undefined?1:oFuee.timeOut;Fuee(node).bind({"mouseover":function(){var _this=this;clearTimeout(_this.timeOut);_this.timeOn=setTimeout(function(){if(oFuee.on!==undefined)oFuee.on.call(_this);},oFuee.timeOn);},"mouseout":function(){var _this=this;clearTimeout(_this.timeOn);_this.timeOut=setTimeout(function(){if(oFuee.out!==undefined)oFuee.out.call(_this);},oFuee.timeOut);}});});},getElemHeightWidth:function(){var elem=this.elem;if(Fuee(elem).css("display")!='none'){return{height:elem.offsetHeight||parseInt(Fuee(elem).css("height")),width:elem.offsetWidth||parseInt(Fuee(elem).css("width"))}}var old=Fuee(elem).resetCSS({display:'',visibility:'hidden'});var hw={height:elem.offsetHeight||parseInt(Fuee(elem).css("height")),width:elem.offsetWidth||parseInt(Fuee(elem).css("width"))};Fuee(elem).css(old);return hw;},getElemContentHeightWidth:function(){var elem=this.elem,fourWay=["Left","Right","Top","Bottom"],opadding=[],oborder=[];if(Fuee(elem).css("display")!='none'){for(var i=0;i<fourWay.length;i++){opadding[i]=parseInt(Fuee(elem).css("padding"+fourWay[i]))||0;oborder[i]=parseInt(Fuee(elem).css("border"+fourWay[i]+"Width"))||0;}return{width:Fuee(elem).getElemHeightWidth().width-opadding[0]-opadding[1]-oborder[0]-oborder[1],height:Fuee(elem).getElemHeightWidth().height-opadding[2]-opadding[3]-oborder[2]-oborder[3]}}var old=Fuee(elem).resetCSS({display:'',visibility:'hidden'});for(var i=0;i<fourWay.length;i++){opadding[i]=parseInt(Fuee(elem).css("padding"+fourWay[i]))||0;oborder[i]=parseInt(Fuee(elem).css("border"+fourWay[i]+"Width"))||0;}var hw={width:Fuee(elem).getElemHeightWidth().width-opadding[0]-opadding[1]-oborder[0]-oborder[1],height:Fuee(elem).getElemHeightWidth().height-opadding[2]-opadding[3]-oborder[2]-oborder[3]};Fuee(elem).css(old);return hw;},changeColor:function(oFuee){var elem=this.elem,type=oFuee.type===undefined?"backgroundColor":oFuee.type,to=oFuee.to,from=oFuee.from===undefined?false:oFuee.from,speed=oFuee.speed===undefined?"normal":oFuee.speed;switch(speed){case"normal":speed=70;break;case"fast":speed=30;break;case"slow":speed=100;break;};var getColor=function(node){if(from===false){if(type==="color"){return Fuee(node).css("color");}else if(type==="backgroundColor"){if(Fuee(node).css("backgroundColor")==="transparent"||Fuee(node).css("backgroundColor")==="rgba(0, 0, 0, 0)"){while(Fuee(node).parent()){var parentBgColor=Fuee(node).parent().css("backgroundColor");if(parentBgColor!=="transparent"&&!!parentBgColor){return parentBgColor;}node=Fuee(node).parent().getElem();}return"#fff";}else{return Fuee(node).css("backgroundColor");}}else{alert("type格式定义错误.");}}else{node.style[type]=from;return from;}};var colorFormat=function(color){if(/^rgb/.test(color)){var c=color.split(",");return{r:+c[0].slice(4,c[0].length),g:+c[1],b:+c[2].slice(0,c[2].length-1)}}else if(/^\#/.test(color)&&color.length==4){return{r:parseInt("0x"+color.slice(1,2)+color.slice(1,2),16),g:parseInt("0x"+color.slice(2,3)+color.slice(2,3),16),b:parseInt("0x"+color.slice(3,4)+color.slice(3,4),16)}}else if(/^\#/.test(color)&&color.length==7){return{r:parseInt("0x"+color.slice(1,3),16),g:parseInt("0x"+color.slice(3,5),16),b:parseInt("0x"+color.slice(5,7),16)}}else{alert("颜色格式错误.");return false;}};var colorChanging=function(begin,end){if(begin<end){begin=begin+Math.ceil((end-begin)/speed);}if(begin>end){begin=begin-Math.ceil((begin-end)/speed);}return begin;};Fuee(elem).each(function(){var _this=this,beforeColor=colorFormat(getColor(_this)),afterColor=colorFormat(to),beginR=beforeColor.r,beginG=beforeColor.g,beginB=beforeColor.b;var m=Math.random(),time="changeColorTime"+m.toString();_this[time]=setInterval(function(){beginR=colorChanging(beginR,afterColor.r);beginG=colorChanging(beginG,afterColor.g);beginB=colorChanging(beginB,afterColor.b);_this.style[type]='rgb('+beginR+','+beginG+','+beginB+')';if(oFuee.changing){oFuee.changing.call(_this);}if(beginR===afterColor.r&&beginG===afterColor.g&&beginB===afterColor.b){clearInterval(_this[time]);if(oFuee.end){oFuee.end.call(_this);}}},1);})}});Fuee.ajax=function(obj){if(!obj.url)return;var xmlhttp=(function(){try{return new XMLHttpRequest();}catch(e){if(window.ActiveXObject){var ActiveXName=['MSXML2.XMLHttp.5.0','MSXML2.XMLHttp.4.0','MSXML2.XMLHttp.3.0','MSXML2.XMLHttp','Microsoft.XMLHttp'];for(var i=0;i<ActiveXName.length;i++){try{return new ActiveXObject(ActiveXName[i]);}catch(e){return false;}}}else{return false;}}})();var type=obj.type||'get',asyn=obj.asyn||true;if(xmlhttp){xmlhttp.open(type,obj.url,asyn);xmlhttp.onreadystatechange=function(){if(xmlhttp.readyState!=4){if(obj.before!==undefined){obj.before();}}else{if(xmlhttp.status==200){if(obj.success!==undefined)obj.xml===true?obj.success(xmlhttp):obj.success(Fuee.trim(xmlhttp.responseText));}else{alert("Error: status code is "+xmlhttp.status);}}};if(obj.stop!==undefined){var time=obj.time||10000;setTimeout(function(){if(xmlhttp.readyState!=4){xmlhttp.abort();obj.stop();return;}},time);}xmlhttp.setRequestHeader("If-Modified-Since","0");if(type=='post'){xmlhttp.setRequestHeader("Content-type","application/x-www-form-urlencoded");xmlhttp.setRequestHeader("Content-length",obj.params.length);xmlhttp.setRequestHeader("Connection","close");xmlhttp.send(obj.params);}else{xmlhttp.send(null);}}else{if(obj.error!==undefined){obj.error();}}};Fuee.parseXML=function(xmlhttp){var xmlDoc=xmlhttp.responseXML.documentElement,result=[];return{stringToArray:function(s){return s.split(" ");},findChild:function(root,nodes){var self=this,tempRoot=root.getElementsByTagName(nodes[0]);if(nodes.length==1){result.push(tempRoot[0]);}else{for(var i=0,len=tempRoot.length;i<len;i++){var tempNodes=nodes.concat();tempNodes.shift();self.findChild(tempRoot[i],tempNodes);}}},find:function(xmlNode){var nodes=this.stringToArray(xmlNode);if(nodes.length==1){return xmlDoc.getElementsByTagName(xmlNode);}else{this.findChild(xmlDoc,nodes);return result;}},findValue:function(xmlNode){var value=[],nodes=this.stringToArray(xmlNode);if(nodes.length==1){var xmlNodes=xmlDoc.getElementsByTagName(xmlNode);Fuee(xmlNodes).each(function(){value.push(Fuee(this).text());});}else{Fuee(this.find(xmlNode)).each(function(){value.push(Fuee.trim(Fuee(this).text()));});}return value;}}};Fuee.drag=function(oFuee){return new Fuee.drag.fn(oFuee);};Fuee.drag.fn=Fuee.drag.prototype=function(oFuee){var key=false,elem,hand,parentnode=null;elem=typeof oFuee.node=="string"?D.getElementById(oFuee.node):oFuee.node;if(oFuee.hand){hand=typeof oFuee.hand=="string"?D.getElementById(oFuee.hand):oFuee.hand;}else{hand=elem;}elem.style.zoom=1;var el=elem;while(Fuee(el).parent()){var p=Fuee(el).parent(),position=p.css("position");if(position=="relative"||position=="absolute"){parentnode=p.getElem();break;}else{el=p.getElem();}}var oldOpacityTemp=Fuee(elem).css("opacity"),oldOpacity=oldOpacityTemp<=1?oldOpacityTemp*100:oldOpacityTemp,oldCursor=Fuee(hand).css("cursor"),oldOverflow=hand.style.overflow;var $oldCss=elem.style.cssText;if(oFuee.init){oFuee.init.call(elem,$oldCss);}if(hand.nodeName=='IMG'){hand.ondragstart=function(){return false;};}else{if(Fuee(hand).find('img')){Fuee(hand).find('img').each(function(){this.ondragstart=function(){return false;};});}}hand.onmousedown=function(e){if(hand.setCapture)hand.setCapture();else if(window.captureEvents)window.captureEvents(Event.MOUSEMOVE|Event.MOUSEUP);e=e||window.event;key=true;var x=Fuee.getMouse(e).x,y=Fuee.getMouse(e).y;if(parentnode){var px=Fuee(parentnode).getPosition().left,py=Fuee(parentnode).getPosition().top,pBorderTop=parseInt(Fuee(parentnode).css("borderTopWidth"))||0,pBorderLeft=parseInt(Fuee(parentnode).css("borderLeftWidth"))||0,pPaddingLeft=parseInt(Fuee(parentnode).css("paddingLeft"))||0;elem.style.left=Fuee(elem).getPosition().left-px-pBorderLeft+"px";elem.style.top=Fuee(elem).getPosition().top-py-pBorderTop+"px";}else{elem.style.left=Fuee(elem).getPosition().left+"px";elem.style.top=Fuee(elem).getPosition().top+"px";}if(oFuee.mousedown){oFuee.mousedown.call(elem,e,hand);}hand.style.cursor=oFuee.cursor||"auto";elem.style.position="absolute";elem.style.margin=0;elem.style.overflow="hidden";if(oFuee.opacity){Fuee(elem).setOpacity(oFuee.opacity);}elem.beginLeft=parseInt(elem.style.left);elem.beginTop=parseInt(elem.style.top);D.onmousemove=function(e){if(!key)return;e=e||window.event;var xCurrent=Fuee.getMouse(e).x,yCurrent=Fuee.getMouse(e).y;elem.cx=xCurrent-x;elem.cy=yCurrent-y;elem.cLeft=elem.beginLeft+elem.cx;elem.cTop=elem.beginTop+elem.cy;if(!elem.lock){if(oFuee.onlyX===true){elem.style.left=elem.cLeft+"px";}else if(oFuee.onlyY===true){elem.style.top=elem.cTop+"px";}else{elem.style.left=elem.cLeft+"px";elem.style.top=elem.cTop+"px";}}if(oFuee.mousemove){oFuee.mousemove.call(elem,e,hand);}};D.onmouseup=function(e){if(!key)return;e=e||window.event;if(hand.releaseCapture)hand.releaseCapture();else if(window.releaseEvents)window.releaseEvents(Event.MOUSEMOVE|Event.MOUSEUP);if(oFuee.opacity){Fuee(elem).setOpacity(oldOpacity);}hand.style.cursor=oldCursor;hand.style.overflow=oldOverflow;if(oFuee.mouseup)oFuee.mouseup.call(elem,e,hand);key=false;};};};Fuee.asynInnerHTML=function(HTML,doingCallback,endCallback){var temp=D.createElement('div'),frag=D.createDocumentFragment();temp.innerHTML=HTML;(function(){if(temp.firstChild){frag.appendChild(temp.firstChild);doingCallback(frag);setTimeout(arguments.callee,0);}else{if(endCallback)endCallback(frag);}})();};Fuee.localStorage=(function(){if(Fuee.isIE()){documentElement=D.documentElement;documentElement.addBehavior('#default#userdata');return{set:function(key,value){documentElement.setAttribute('value',value);documentElement.save(key);},get:function(key){documentElement.load(key);return documentElement.getAttribute('value');},remove:function(key){documentElement.removeAttribute('value');documentElement.save(key);}}}return{set:function(key,value){localStorage[key]=value;},get:function(key){return localStorage[key];},remove:function(key){key==undefined?localStorage.clear():delete localStorage[key];}};})();})();